= Lab Guide: Creating a Job Template
:notoc:
:toc-title: Table of Contents
:nosectnums:
:icons: font

_A guide to running a playbook with the automation controller by creating and launching a Job Template._

---

== Lab Briefing

In the automation controller, **job templates** are a visual representation of the `ansible-playbook` command and all the flags you can use when executing from the command line. They are the primary mechanism for running your Ansible Playbooks.

image::job-templates-home-with-example-job-template.png[Job Templates list view in automation controller, opts="border"]

---

== Lab Guide: Hands-On Tasks

A **Job Template** is a definition and set of parameters for running an Ansible Playbook. Job Templates are useful for executing the same job many times while also encouraging the reuse of Ansible content and collaboration between teams.

To create a Job Template, you need a **Project** to source your playbooks from, which you created in the previous challenge. While a Project might contain multiple playbooks, a Job Template can only run one playbook at a time.

[WARNING]
====
Do not confuse a **Job Template** with a **Jinja template**. Jinja templates are files used to create dynamic content (like configuration files) by replacing variables during runtime. They are different concepts.
====

[IMPORTANT]
====
Reminder that the credentials to log in to the automation controller are:

* *Username:* `admin`
* *Password:* `ansible123!`
====

=== Task 1: Create the Job Template

First, you will create a new job template that links your inventory, project, playbook, and credentials together.

. **Navigate to the Templates page.**
+
In the left navigation menu, go to **Automation Execution** â†’ **Templates**.

. **Create a new job template.**
+
**Click** the blue **Create template** button and select **Create job template**.

. **Enter the job template details.**
+
Fill out the form with the following information:
+
* **Name:** `Install Apache`
* **Job Type:** `Run`
* **Inventory:** `Lab-Inventory`
* **Project:** `Apache playbooks`
* **Playbook:** `apache.yml`
* **Credentials:** Select `lab-credentials`.
* **Privilege Escalation:** **Check** this box to enable `become`.

. **Save the job template.**
+
Leave all other fields as they are and **click** the blue **Create job template** button.

[IMPORTANT]
====
The *Credentials* field is not mandatory for all job templates, but if you do not select the correct machine credentials for a job that connects to a remote host, the execution will fail.
====

=== Task 2: Launch the Job Template

Now that the job template is created, you can launch it to run the playbook.

. **Navigate to the Templates page.**
+
If you are not already there, go to **Automation Execution** â†’ **Templates**.

. **Launch the template.**
+
You can launch the template in two ways:
+
--
* **Click** the **Launch** icon (ðŸš€) next to the `Install Apache` template in the list.
* **Click** on the name `Install Apache` to open its details page, then **click** the blue **Launch** button.
--

. **Verify the execution.**
+
The job will run, and you will be taken to the output page. **Verify** that the job completes with a **Successful** status.

=== Task 3: Verify the Result

Finally, verify that the Apache web server was installed correctly on both nodes.

. **Check the Node1 web page.**
+
In the tab bar at the top of your lab screen, **click** the **Node1 Web** tab and verify you see the "Hello World" message.

. **Check the Node2 web page.**
+
**Click** the **Node2 Web** tab and verify you see the same "Hello World" message.

---

== Next Steps

Press the `Check` button below to proceed to the next challenge.

== Troubleshooting

If you have encountered an issue or have noticed something not quite right, please link:https://github.com/ansible/instruqt/issues/new?labels=intro-to-controller&title=Issue+with+Intro+to+Controller+slug+ID:+controller-101-template&assignees=leogallego[open an issue on GitHub].
